# RailsAdminGlobalizeField

  RailsAdminGlobalizeField adds tabbed interface to [rails_admin](https://github.com/sferik/rails_admin) for multilingual models (using [globalize](https://github.com/globalize/globalize) gem)

  It adds custom field type that you can use for globalize translations association.

  This gem uses Translation models generated by globalize, so you don't need to add any additional model to your app (as some older globalize3 gists suggested).


## Installation

Add and configure globalize gem first.

``` ruby
  gem 'globalize', '~> 4.0'
```

Then add this gem and run `bundle`
``` ruby
  gem 'rails_admin_globalize_field'
```


## Usage

> Don't forget to set I18n.available_locale config, because it uses that to determine what tabs to show

Add **translation** models to `config.included_models` in `initializers/rails_admin.rb`:
``` ruby
  config.included_models = ['Model','Model::Translation']
```

Add `accepts_nested_attributes_for` for translations to your **translated** model.

``` ruby
  class Model < ActiveRecord::Base
    translates :title, :desc
    accepts_nested_attributes_for :translations, allow_destroy: true
  end
```

Add configuration to your **translated** model and associated **translation** model. `:locale` field is always required.
``` ruby
  config.model 'Post' do
    configure :translations, :globalize_tabs
  end

  config.model 'Model::Translation' do
    visible false
    field :locale, :hidden do
      help ''
    end
    include_fields :locale, :title, :desc
  end
```


Add this stylesheet into app/assets/stylesheets/rails_admin/theming.scss:
``` css
  /*
   *= require rails_admin/ra.globalize_tabs
  */
```


If you need to add validation to the translation class, you can add it on `translation_class` inside **translated** model:
```ruby
  translation_class.validates :title, presence: true
```


## Known issues

If you need to use `null: false` options on any column in translations table, you'll have to use [this globalize fork](https://github.com/scarfacedeb/globalize/tree/before_callbacks) for now.
See: https://github.com/globalize/globalize/issues/325


## Screenshot

![Screenshot](https://raw.github.com/scarfaceDeb/rails_admin_globalize_field/screenshots/screenshots/shot1.png)

## Contributing

1. Fork it
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create new Pull Request
